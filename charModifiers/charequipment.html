
<script>
equipItem = function(d){
	if(charData['equiped']==undefined){charData['equiped']={}}
	if(charData['equiped'][d.equipto]==undefined){charData['equiped'][d.equipto]={}}
		charData['equiped'][d.equipto] = d;
    
    d3.select('#EQ-' + d.name).selectAll('text').text(function (d) {
		return d.name + " (" + d.equipto + ")"
		})
}


EQHeight = height/2
WQWidth = width/2
var EQCanvas = d3.select("body")
		.append("svg")
		.attr("width",WQWidth)
		.attr("height",EQHeight)
		.attr("id","eqwindow")
		.attr("z-index","1")
		.style("border", "1px solid black");


var Equipment = EQCanvas.selectAll('.equipment')
	.data(charData['equipment'])
	.enter()
    .append('g')
    .attr('id', function (d) {return 'EQ-' + d.name})
 	.on("click", function(element){
		Equipment.selectAll('rect')
		.transition()
		.style('fill','black');
		Equipment.selectAll('text')
		.attr('fill','white');
		equipItem(element)
})

Equipment.append('rect')
	.attr('x', 0)
	.attr('y',function(d,i){return i*41})
	.attr('height',40)
	.attr('width',200)
	.style('fill','blue')
	.attr('class', 'button')

Equipment.append("text")
	.text(function(d){
		return d.name
		})
	.attr('x',5)
	.attr('y',function(d,i){return i*42+20})
	.attr("font-size", "19px")
	.attr("fill", "black")
	.attr("font-family","sans-serif")

if(charData['equiped']!=undefined){
var Equiped = EQCanvas.selectAll('.equiped')
	.data(charData['equiped'])
	.enter()
	.append('g');

Equiped.append('rect')
	.attr('x', 150)
	.attr('y', function(d,i){return i*41})
	.attr('height',40)
	.attr('width',150)
	.style('fill','blue')
	.attr('class', 'button');
}
</script>
