<script>
// random coordinates, for placing objects. 
function get_rnd_coord(){  
        x = Math.floor(Math.random() * width) + 1;
        y = Math.floor(Math.random() * height) + 1;
        return [x,y]
}

function randBetween(min, max) {
  return Math.random() * (max - min) + min;
}

//for transitioning coords (moving monsters) 
//picks a value from negative move to positive move
function coordshifter(move){
	return randBetween(move*-1, move)
}

//some additions to d3 that allow me to move them to the front and back. 
d3.selection.prototype.moveToFront = function() {  
	return this.each(function(){	
			this.parentNode.appendChild(this);
		});				
	};

d3.selection.prototype.moveToBack = function() {  
	return this.each(function() { 
		var firstChild = this.parentNode.firstChild; 
		if (firstChild) { 
			this.parentNode.insertBefore(this, firstChild); 
			}	 
		});
	}; 

//find out if the coords are positive and negative,
//returns [-1,1]  for multiplying with other coordinates and determine direction.
function get_pos_neg(x,y){
	nx = x/Math.abs(x)
	ny = y/Math.abs(y)
	return [nx,ny]
}

//calculate the distance to the character. 
function get_dist_to_char(x,y){
	a = Math.abs(char_y-y)
	b = Math.abs(char_x-x)

	c2 = (a^2)+(b^2)
	dist = Math.sqrt(c2)
	return dist
}

//TODO:make SQRT function as ** is expensive
function get_distance_vector(Xa,Ya,Xb,Yb,speed){
	var d = [Xb-Xa,Yb-Ya]
	mag_d = ((d[0]**2)+(d[1]**2))**(1/2)
	du = [d[0]/mag_d,d[1]/mag_d]
	coord = [du[0]*speed,du[1]*speed]
	return coord
}

function move_towards_char(x,y,s){
	// produces new coordinates that are in the direction of the character, using the speed
	// where x,y are the current coordinates of the object that you would like to move.

	if (char_x - x < 0){
		a = x - s
	} else if(char_x - x > 0){
		a = x + s
	}
	if (char_y - y < 0){
		b = y - s
	} else if(char_y - y > 0){
		b = y + s
	}
	return [a,b]
}



</script>
